/*!
 * jQuery Stepy - A Wizard Plugin
 * --------------------------------------------------------------
 *
 * jQuery Stepy is a plugin that generates a customizable wizard.
 *
 * Licensed under The MIT License
 *
 * @version        1.1.0
 * @since          2010-07-03
 * @author         Washington Botelho
 * @documentation  wbotelhos.com/stepy
 *
 * --------------------------------------------------------------
 *
 *  <form>
 *    <fieldset title="Step 1">
 *      <legend>description one</legend>
 *      <!-- inputs -->
 *    </fieldset>
 *
 *    <fieldset title="Step 2">
 *      <legend>description two</legend>
 *      <!-- inputs -->
 *    </fieldset>
 *
 *    <input type="submit" />
 *  </form>
 *
 *  $('form').stepy();
 *
 */
(function(n){var t={init:function(i){return this.each(function(){var f;t.destroy.call(this);this.opt=n.extend({},n.fn.stepy.defaults,i);var r=this,u=n(this),f=u.attr("id");(f===undefined||f==="")&&(f=t._hash.call(r),u.attr("id",f));r.opt.validate&&(jQuery.validator.setDefaults({ignore:r.opt.ignore}),u.append('<div class="stepy-errors" />'));r.header=t._header.call(r);r.steps=u.children("fieldset");r.steps.each(function(n){t._createHead.call(r,this,n);t._createButtons.call(r,this,n)});r.heads=r.header.children("li");r.heads.first().addClass("stepy-active");r.opt.finishButton&&t._bindFinish.call(r);r.opt.titleClick?r.heads.click(function(){var e=r.heads.filter(".stepy-active").attr("id").split("-"),f=parseInt(e[e.length-1],10),i=n(this).index();if(i>f){if(r.opt.next&&!t._execute.call(u,r.opt.next,i))return!1}else if(i<f&&r.opt.back&&!t._execute.call(u,r.opt.back,i))return!1;i!=f&&t.step.call(r,i+1)}):r.heads.css("cursor","default");r.opt.enter&&t._bindEnter.call(r);r.steps.first().find(":input:visible:enabled").first().select().focus();u.data({settings:this.opt,stepy:!0})})},_bindEnter:function(){var t=this;t.steps.delegate('input[type="text"], input[type="password"]',"keypress",function(i){var f=i.keyCode?i.keyCode:i.which,r,u;f==13&&(i.preventDefault(),r=n(this).closest("fieldset").find(".stepy-navigator"),r.length&&(u=r.children(".button-next"),u.length?u.click():t.finish&&t.finish.click()))})},_bindFinish:function(){var i=this,r=n(this),e=r.children('input[type="submit"]'),f,u;if(i.finish=e.length===1?e:r.children(".btn .btn-succes .stepy-finish"),i.finish.length){f=r.is("form");u=undefined;f&&i.opt.finish&&(u=r.attr("onsubmit"),r.attr("onsubmit","return false;"));i.finish.on("click.stepy",function(n){if(i.opt.finish&&!t._execute.call(r,i.opt.finish,i.steps.length-1))n.preventDefault();else if(f){u?r.attr("onsubmit",u):r.removeAttr("onsubmit");var e=i.finish.attr("type")==="submit";e||i.opt.validate&&!t.validate.call(r,i.steps.length-1)||r.submit()}});i.steps.last().children(".stepy-navigator").append(i.finish)}else n.error('Submit button or element with class "stepy-finish" missing!')},_createBackButton:function(i,r){var u=this,e=n(this),f={href:"#","class":"btn btn-default",html:u.opt.backLabel};n("<a />",f).on("click.stepy",function(n){n.preventDefault();(!u.opt.back||t._execute.call(u,u.opt.back,r-1))&&t.step.call(u,r-0)}).appendTo(i)},_createButtons:function(i,r){var u=t._navigator.call(this).appendTo(i);r===0?this.steps.length>1&&t._createNextButton.call(this,u,r):(n(i).hide(),t._createBackButton.call(this,u,r),r<this.steps.length-1&&t._createNextButton.call(this,u,r))},_createHead:function(i,r){var i=n(i).attr("id",n(this).attr("id")+"-step-"+r).addClass("stepy-step"),u=t._head.call(this,r);u.append(t._title.call(this,i));this.opt.description&&u.append(t._description.call(this,i));this.header.append(u)},_createNextButton:function(i,r){var u=this,f=n(this),e={href:"#","class":"btn btn-primary",html:u.opt.nextLabel};n("<a/>",e).on("click.stepy",function(n){n.preventDefault();(!u.opt.next||t._execute.call(f,u.opt.next,r+1))&&t.step.call(u,r+1+1)}).appendTo(i)},_description:function(i){var r=i.children("legend");if(this.opt.legend||r.hide(),r.length)return n("<span />",{html:r.html()});t._error.call(this,"<legend /> element missing!")},_error:function(t){n(this).html(t);n.error(t)},_execute:function(n,t){var i=n.call(this,t+1);return i||i===undefined},_hash:function(){return this.hash="stepy-"+Math.random().toString().substring(2),this.hash},_head:function(t){return n("<li />",{id:n(this).attr("id")+"-head-"+t})},_header:function(){var t=n("<ul />",{id:n(this).attr("id")+"-header","class":"stepy-header"});return this.opt.titleTarget?t.appendTo(this.opt.titleTarget):t.insertBefore(this),t},_navigator:function(){return n('<div class="stepy-navigator panel-footer" />')},_title:function(t){return n("<div />",{html:t.attr("title")||"--"})},destroy:function(){return n(this).each(function(){var t=n(this),i;t.data("stepy")&&(i=t.data("stepy",!1).children("fieldset").css("display",""),t.children(".stepy-errors").remove(),this.finish.appendTo(i.last()),i.find(".stepy-navigator").remove())})},step:function(i){var h=this,r,u,e,f,o,s;if(that=n(this),opt=that[0].opt,i--,r=that.children("fieldset"),i>r.length-1&&(i=r.length-1),u=i,opt.validate)for(e=!0,f=0;f<i;f++)if(e&=t.validate.call(this,f),opt.block&&!e){u=f;break}return o=r.length,opt.transition=="fade"?r.fadeOut(opt.duration,function(){--o>0||r.eq(u).fadeIn(opt.duration)}):opt.transition=="slide"?r.slideUp(opt.duration,function(){--o>0||r.eq(u).slideDown(opt.duration)}):r.hide(opt.duration).eq(u).show(opt.duration),that[0].heads.removeClass("stepy-active").eq(u).addClass("stepy-active"),that.is("form")&&(s=undefined,s=u==i?r.eq(u).find(":input:enabled:visible"):r.eq(u).find(".error").select().focus(),s.first().select().focus()),opt.select&&opt.select.call(this,u+1),that},validate:function(t){var i=n(this);if(!i.is("form"))return!0;var u=this,o=i.children("fieldset").eq(t),r=!0,f=n("#"+i.attr("id")+"-header").children().eq(t),e=i.validate();return n(o.find(":input:enabled").get().reverse()).each(function(){var t=e.element(n(this));t===undefined&&(t=!0);r&=t;r?u.opt.errorImage&&f.removeClass("stepy-error"):(u.opt.errorImage&&f.addClass("stepy-error"),e.focusInvalid())}),r}};n.fn.stepy=function(i){if(t[i])return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist!");else return t.init.apply(this,arguments)};n.fn.stepy.defaults={back:undefined,backLabel:'<i class="fa fa-long-arrow-left"><\/i> Back',block:!1,description:!0,duration:undefined,enter:!0,errorImage:!1,finish:undefined,finishButton:!0,ignore:"",legend:!0,next:undefined,nextLabel:'Next <i class="fa fa-long-arrow-right"><\/i>',select:undefined,titleClick:!1,titleTarget:undefined,transition:undefined,validate:!1}})(jQuery);
//# sourceMappingURL=jquery.stepy.min.js.map
